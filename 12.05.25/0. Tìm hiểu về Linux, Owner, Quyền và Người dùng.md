# Tìm hiểu về Linux, Owner, Quyền và Người dùng

## 1. Tổng quan về Linux
### 1.1 Linux là gì
- Linux là một họ các hệ điều hành tự do nguồn mở tương tự Unix và dựa trên Linux kernel, một hạt nhân hệ điều hành được phát hành lần đầu tiên vào ngày 17 tháng 9 năm 1991, bởi Linus Torvalds.
- Linux là một nền tảng mã nguồn mở và miễn phí được phát triển cho người dùng toàn cầu. Ra đời vào năm 1991, hệ điều hành này dựa trên nền tảng của Unix và được viết bằng ngôn ngữ lập trình C. Có khả năng hoạt động trên nhiều loại thiết bị khác nhau, từ máy tính cá nhân, laptop đến server và thiết bị nhúng.
- Lịch sử hình thành và phát triển linux
	* Khởi đầu vào năm 1991, Linus Torvalds – một sinh viên người Phần Lan, bắt đầu phát triển Linux dựa trên Unix. Vào ngày 25 tháng 8, ông công bố dự án trên Usenet và phát hành phiên bản đầu tiên vào ngày 17 tháng 9.
	* Quá trình phát triển
		* 1992: Chúng được phát hành dưới giấy phép GNU General Public License (GPL), cho phép tự do sử dụng, chỉnh sửa và phân phối mã nguồn.
		* 1993-1994: Các bản phân phối như Debian, Slackware và Red Hat xuất hiện, cung cấp hệ điều hành hoàn chỉnh dựa trên Linux kernel.
		* 1996: Linux kernel 2.0 ra mắt với hỗ trợ đa xử lý đối xứng (SMP).
		* 1998-1999: Các công ty lớn như IBM, Oracle và Dell bắt đầu hỗ trợ hệ điều hành này, Red Hat phát hành phiên bản thương mại của Linux.
		* 2000s: Hệ điều hành mở rộng sang máy chủ, thiết bị nhúng và di động. Năm 2004, Ubuntu ra mắt và trở nên phổ biến.
		* 2007: Google phát triển Android, một hệ điều hành dựa trên Linux kernel, trở thành hệ điều hành di động phổ biến nhất.
		* 2010s-2020s: Chúng trở thành nền tảng cho điện toán đám mây, container (Docker, Kubernetes) và Internet of Things (I
### 1.2 Kiến trúc hệ thống Linux.
- Kiến trúc Linux gồm các thành phần : Kernel, System Library, Hardware layer, System và Shell functions.
![images](./images/linux-archite.jpg)
#### 1.2.1 Kernel 
- là cốt lõi của hệ điều hành dựa trên Linux. Nó ảo hóa các tài nguyên phần cứng chung của máy tính để cung cấp cho mỗi quy trình các tài nguyên ảo của nó. Điều này làm cho quy trình có vẻ như là quy trình duy nhất đang chạy trên máy. Kernel cũng chịu trách nhiệm ngăn ngừa và giảm thiểu xung đột giữa các quy trình khác nhau. 
- Các loại kernel là: 
	* Monolithic Kernel: Là loại kernel mà tất cả dịch vụ của hệ điều hành hoạt động trong kernel. Số lượng code lớn, phức tạp (Unix, Linux, Open VMS, XTS-400 etc. )
	* Micro kernels: Đây là loại kernel có cách tiếp cận tối giản. Nó có bộ nhớ ảo và lập lịch luồng. Micro Kernel ổn định hơn với ít dịch vụ hơn trong không gian kernel. Nó đặt phần còn lại trong không gian người dùng. Nó được sử dụng trong hệ điều hành nhỏ. (Mach, L4, AmigaOS, Minix, K42 etc.)
	* Hybrid kernels: Nó là sự kết hợp của cả Monolithic Kernel và Micro kernels. Nó có tốc độ và thiết kế của Monolithic Kernel và tính mô-đun và tính ổn định của Micro kernels.(Windows NT, Netware, BeOS etc.)
	* Exo kernels: Đây là loại kernel tuân theo nguyên tắc end-to-end. Nó có ít trừu tượng phần cứng nhất có thể. Nó phân bổ tài nguyên vật lý cho các ứng dụng.(Nemesis, ExOS etc.)
	* Nano Kernel: Đây là loại kernel cung cấp khả năng trừu tượng hóa phần cứng nhưng không có dịch vụ hệ thống. Micro Kernel cũng không có dịch vụ hệ thống do đó Micro Kernel và Nano Kernel đã trở nên tương tự nhau.(EROS etc.)
- Chức năng của Kernel: Kernel chịu trách nhiệm cho nhiều chức năng quan trọng khác nhau đảm bảo hệ thống máy tính hoạt động trơn tru. Các chức năng này bao gồm:
	* 1. Quản lý tiến trình
		- Lên lịch và thực thi các tiến trình.
		- Chuyển đổi ngữ cảnh giữa các tiến trình.
		- Tạo và kết thúc tiến trình.
	* 2. Quản lý bộ nhớ
		- Phân bổ và hủy phân bổ không gian bộ nhớ.
		- Quản lý bộ nhớ ảo.
		- Xử lý bảo vệ và chia sẻ bộ nhớ.
	* 3. Quản lý thiết bị
		- Quản lý thiết bị đầu vào/đầu ra.
		- Cung cấp giao diện thống nhất cho các thiết bị phần cứng.
		- Xử lý giao tiếp trình điều khiển thiết bị.
	* 4. Quản lý hệ thống tệp
		- Quản lý hoạt động và lưu trữ tệp.
		- Xử lý gắn kết và hủy gắn kết hệ thống tệp.
		- Cung cấp giao diện hệ thống tệp cho các ứng dụng.
	* 5. Quản lý tài nguyên
		- Quản lý tài nguyên hệ thống (thời gian CPU, dung lượng đĩa, băng thông mạng)
		- Phân bổ và hủy phân bổ tài nguyên khi cần
		- Giám sát việc sử dụng tài nguyên và thực thi giới hạn tài nguyên
	* 6. Bảo mật và Kiểm soát truy cập
		- Thực thi chính sách kiểm soát truy cập.
		- Quản lý quyền và xác thực của người dùng.
		- Đảm bảo tính bảo mật và toàn vẹn của hệ thống.
	* 7. Giao tiếp giữa các quy trình
		- Tạo điều kiện thuận lợi cho giao tiếp giữa các quy trình.
		- Cung cấp các cơ chế như truyền tin nhắn và bộ nhớ chia sẻ.
#### 1.2.2. System Library
- Thư viện hệ thống là một số hàm được xác định trước mà bất kỳ chương trình ứng dụng hoặc tiện ích hệ thống nào cũng có thể truy cập vào các tính năng của kernel. Các thư viện này là nền tảng mà bất kỳ phần mềm nào cũng có thể được xây dựng.
- System Library chứa mã và hàm mà ứng dụng và quy trình sử dụng để tương tác với kernel. Thay vì giao tiếp trực tiếp với kernel, ứng dụng truy cập thư viện, giúp các hoạt động hiệu quả và an toàn hơn. Các thư viện này cung cấp các dịch vụ thiết yếu như hoạt động I/O, phân bổ bộ nhớ, v.v.
- Một số thư viện hệ thống phổ biến nhất là:
	* Thư viện GNU C: Đây là thư viện C cung cấp hệ thống cơ bản nhất cho giao diện và thực thi các chương trình C. Thư viện này cung cấp nhiều hàm tích hợp để thực thi.
	* libpthread (POSIX Threads): Thư viện này đóng vai trò quan trọng đối với đa luồng trong Linux, cho phép người dùng tạo và quản lý nhiều luồng.
	* libdl (Dynamic Linker): Thư viện này chịu trách nhiệm tải và liên kết tệp khi chạy.
	* libm (Math Library): Thư viện này cung cấp cho người dùng mọi loại hàm toán học và thực thi chúng.
	* Một số thư viện hệ thống khác là: librt (Realtime Library), libcrypt (Cryptographic Library), libnss (Name Service Switch Library), libstdc++ (C++ Standard Library)
#### 1.2.3 Shell
- Shell có thể được xác định là giao diện cho kernel, ẩn việc thực thi các chức năng bên trong của kernel khỏi người dùng. Người dùng chỉ cần nhập lệnh và sử dụng chức năng của kernel, tác vụ cụ thể đó sẽ được thực hiện theo đó.
- Phân loại Shell: 
	* Command Line shell: command-line shell là giao diện dạng văn bản cho phép người dùng thực hiện lệnh bằng cách nhập lệnh. Shell sẽ diễn giải và xử lý các lệnh này, sau đó hiển thị đầu ra trong terminal. Ví dụ bao gồm bash và zsh.
	* Graphical User Interface: Thực hiện quy trình do người dùng cung cấp theo cách đồ họa và kết quả được hiển thị trong cửa sổ đồ họa.
![images](./images/shell.png)

#### 1.2.4 Hardware layer
- Lớp phần cứng của Linux là cấp thấp nhất của hệ điều hành. Nó đóng vai trò quan trọng trong việc quản lý tất cả các thành phần phần cứng. Nó bao gồm trình điều khiển thiết bị, chức năng kernel, quản lý bộ nhớ, điều khiển CPU và hoạt động I/O. Lớp này tổng quát hóa độ phức tạp cứng, bằng cách cung cấp giao diện cho phần mềm bằng cách đảm bảo chức năng phù hợp của tất cả các thành phần.
#### 1.2.5 System Utitlies 
- Tiện ích hệ thống là các công cụ dòng lệnh thực hiện nhiều tác vụ khác nhau do người dùng cung cấp để quản lý và quản trị hệ thống tốt hơn. Các tiện ích này cho phép người dùng thực hiện nhiều tác vụ khác nhau, chẳng hạn như quản lý tệp, giám sát hệ thống, cấu hình mạng, quản lý người dùng, v.v.
### 1.3 Các bản phân phối (distro) phổ biến.
- Distro* là từ viết tắt thay thế cho Linux Distribution - bản phân phối của Linux - là một hệ điều hành được tập hợp từ nhiều phần mềm dựa trên nhân Linux (Linux Kernel) và thường có một hệ thống quản lý các gói tin.
- Thành phần: Một bản distro điển hình bao gồm: một kernel Linux, các công cụ và thư viện GNU, các phần mềm thêm vào, phần document, một hệ thống window system (mà phần lớn là sử dụng X Window System - hệ thống cửa sổ dùng để hiển thị đồ họa Bitmap), window manager và desktop environment.
- Hiện tại, có khoảng 600 bản distro tồn tại, với gần 500 trong số đó phát triển tích cực, liên tục được sửa đổi và cải thiện. Bởi sự sẵn có của số lượng lớn phần mềm, distro khá là đa dạng về hình thức - phù hợp với từ desktop, server, laptop, netbooks, điện thoại di động, máy tính bảng cũng như môi trường tối thiếu thường để sử dụng trong các hệ thống nhúng. 
- Có nhiều bản phân phối thương mại như Fedora (Red hat), OpenSUSE (SUSE), Ubuntu (Canonical Ltd); và hoàn toàn phân phối dựa vào cộng đồng như Debian, Slackware, Gentoo hay Arch Linux.  
- Có 3 nhóm distro phổ biến đó là: 
	+ Debian
		- Debian
		- Ubuntu 
		- Backtrack (Kali Linix)
	+ RedHat Linix
		- Fedora
		- RedHat
		- CentOS
	+ Slackware
		- Slackware
		- NimbleX
#### 1.3.1 Debian Distro
	- Là một họ distro nổi tiếng và có tầm ảnh hưởng được biết đến với 2 distro thông dụng là Debian và Ubuntu.
	- Hỗ trợ gói cài đặt .deb
	- Hỗ trợ kiến trúc phần cứng x86-64, IA32-64, ...
	- Là hệ điều hành có tính ổn định cao với trình quản lý gói apt mạnh mẽ.

##4. RedHat Distro
	- Là một họ distro được biết đến với các distro: Fedora, CentOS và RedHat Linux.
	- Hỗ trợ gói cài đặt .rpm
	- Hỗ trợ kiến trúc phần cứng x86-64, ...
	- Là hệ điều hành có tính ổn định với với trình quản lý cài đặt yum.
 
##5. Slackware Distro
	- Đây là nhóm distro ra đời sớm nhất.
	- Hỗ trợ gói cài đặt .tgz hoặc .txz.
	- Ổn định và tùy biến cao, thích hợp cho Server.
	
## 2. Quản lý người dùng và nhóm
### 2.1 User 
- User là người có thể truy cập đến hệ thống. User có username và password.
- Có hai loại user: super user và regular user.
- Mỗi user còn có một định danh riêng gọi là UID.
- Định danh của người dùng bình thường sử dụng giá trị bắt đầu từ 500.
- Linux OS lưu trữ thông tin người dùng trên file `/etc/passwd`, với các trường được phân tách nhau bởi dấu ":", theo định dạng
```
username:password:UID:GID:comment:home:shell
```
- Ví dụ 
```
dgarn:x:1001:1001:Damon Garn:/home/dgarn:/bin/bash
```
1 - Tên user ( login name )
2 - Mật khẩu group đã được mã hóa ( vì có file /etc/shadow ) nên mặc định ở đây là x
3 - User ID ( uid )
4 - Group ID ( gid )
5 - Tên mô tả người sử dụng ( comment )
6 - Thư mục home của user ( thường là /home/user_name )
7 - Loại shell sẽ hoạt động khi user login , thường là /bin/bash
- Password được hash và lưu trong `/etc/shadow`
	- Định dạng của các bản ghi trong file /etc/shadow
```
username:password:last password change:min:max:warning:inactive:expired
```	- với `change:min:max:'warning':inactive:expired` là các thông tin liên quan đến việc thay đổi password.
- Thêm, xóa, sửa user
- Thêm 
```
sudo useradd [options] <username>
```
	- Trong đó, các options là:
		--create-home(-m): chỉ định home directory, mặc định là /home/<username>
		--shell(-s): chỉ định shell, mặc định là /bin/bash , ví dụ /bin/sh, hoặc nếu không cho user quyền sử dụng shell thì để giá trị /sbin/nologin
		--uid(-u): chỉ định user id
		--comment: phần này là ghi chú để gợi nhớ user, thường người ta hay để họ tên đầy đủ
- Sửa: Cú pháp để cập nhật user
```
sudo usermod [options] <username>
```
	- Trong đó, các option có thể là:
		--comment (-c): chỉnh sửa trường comment
		--home (-d): chỉnh sửa home directory
		--expiredate (-d): thay đổi thời gian hết hạn
		--login (-l): chỉnh sửa tên đăng nhập
		--lock (-L): khóa user
		--unlock (-U): bỏ khóa
	- Trong phần cập nhật user, có một mục nhỏ khá quan trọng đó là thêm user vào group. 
		- Để thêm user vào group mới, đồng thời out hết các group khác, sử dụng cú pháp
```
sudo usermod -G <group-name> <user-name>
```
		- Thêm user vào group mới, vẫn là thành viên của group cũ
```
sudo usermod -aG <group-name> <user-name>
```
### 2.2 Group 
- Group là tập hợp nhiều user lại.
- Mỗi user luôn là thành viên của một group.
- Khi tạo một user thì mặc định một group được tạo ra.
- Mỗi group còn có một định danh riêng gọi là GID.
- Định danh của group thường sử dụng giá trị bắt đầu từ 500.


### 2.3 Quyền và chủ sử hữu trong Linux
- Linux cung cấp ba loại chủ sở hữu: người dùng(user), nhóm(group) và các loại khác(other) .
- Mỗi loại có một tập hợp quyền riêng: đọc, ghi và thực thi.
- Lệnh `chmod` được sử dụng để sửa đổi các quyền sở hữu và quyền này.
### 2.1 Owner (Chủ sở hữu) trong Linux
### 2.2 Quyền (Permissions) trên file/folder
Các lệnh hữu ích khác
Bộ soạn thảo trên linux: vi, nano
Process trong Linux
Network trong Linux
Network File System (NFS)
Logical Volume Manager


https://maychuviet.vn/linux-la-gi-tim-hieu-ngay-thong-tin-ve-he-dieu-hanh/
https://www.geeksforgeeks.org/kernel-in-operating-system/
https://www.geeksforgeeks.org/introduction-to-linux-operating-system/